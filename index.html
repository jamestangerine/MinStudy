<!DOCTYPE html>
<html lang="en">
    <head>
        <title>MinStudy</title>
        <link rel="manifest" href="manifest.webmanifest">
        <link rel="icon" href="data:,">
        <link rel="stylesheet" href="site.css">
    </head>
    <body>
        <section id="initBody" style="display: block">
            <div id="report" class="finishDisplay">
                <h2>Congratulations!</h2>
                <p style="margin-top: -1em">You completed all terms in <span id="roundCount"></span> rounds.</p>
            </div>
            <h1>Minimal Studier</h1>
            <div id="repeatDialogue" class="finishDisplay">
                <p>Retry with the same list?</p>
                <button id="restudy" style="margin-bottom:1em">Study Again</button>
            </div>
            <br id="extraBreak" style="display: none">
            <div class="centered">
                <p>Enter a study list with 3 to 2500 term-definition pairs.</p>
                <textarea id="input" rows="8" cols="50" placeholder="term&#9;definition&#10;term&#9;definition&#10;term&#9;definition&#10;..."></textarea>
            </div>
            <br><h3>Coding Separators:</h3>
            <table>
                <tr>
                    <td>
                        Term-Def: <textarea id="term-def" rows="1" cols="5"></textarea>
                        <br><p class="caption">Default: Tab</p>
                    </td>
                    <td style="padding-left:2em">
                        Entry: <textarea id="entry" rows="1" cols="5"></textarea>
                        <br><p class="caption">Default: Newline</p>
                    </td>
                </tr>
            </table>
            <h3>Question Style:</h3>
            <p>Ask <span id="ask1">definition</span>&nbsp;&nbsp;&nbsp;<button id="swap1">Swap</button>&nbsp;&nbsp;&nbsp;Answer with <span id="ans1">test</span></p>
            <br><button id="start">Begin Studying</button>
            <p style="visibility: hidden; text-align: center;"><b class="err">Error:</b> <span id="error-message"></span></p>
        </section>
        <section id="entryBody" style="display: none">
            <h1>Quiz</h1>
            <div class="centered">
                <p><b>Definition:</b> <span id="ques"></span></p><br>
                <textarea id="ans" rows="1" cols="50" placeholder="Enter the correct term"></textarea>
            </div>
            <br><br><table>
                <tr>
                    <td><button id="submit">Submit</button></td>
                    <td style="padding-left:1em"><button id="prereview">Pre-Add to Review List</button></td>
                </tr>
            </table>
            <h3>Question Style:</h3>
            <p>Ask <span id="ask2">definition</span>&nbsp;&nbsp;&nbsp;<button id="swap2">Swap</button>&nbsp;&nbsp;&nbsp;Answer with <span id="ans2">test</span></p><br><br>
            <div id="incorrectDisplay" style="display: none">
                <p class="text-align: center;"><b class="err">Incorrect</b> | Correct answer: <span id="correctAns"></span></p>
                <table>
                    <tr>
                        <td><button id="review">Add to Review List</button></td>
                        <td style="padding-left:1em"><button id="skip">Skip to Next Term</button></td>
                    </tr>
                </table>
            </div>
        </section>
        <section id="resultsBody" style="display: none">
            <h1>Results</h1>
            <textarea id="results" rows="8" cols="50" readonly></textarea><br>
            <p class="caption">These are the questions you missed. This text area is read-only, but you can resize it.</p>
            <table>
                <tr>
                    <td><button id="next">Study Missed Items</button></td>
                    <td style="padding-left:1em"><button id="homescreen">Return to Home</button></td>
                </tr>
            </table>
            <h3>Question Style:</h3>
            <p>Ask <span id="ask3">definition</span>&nbsp;&nbsp;&nbsp;<button id="swap3">Swap</button>&nbsp;&nbsp;&nbsp;Answer with <span id="ans3">test</span></p>
        </section>
    </body>
    <script type="module">
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("sw.js");
        }
        const input = document.getElementById("input");
        const termDef = document.getElementById("term-def");
        const entry = document.getElementById("entry");
        const error = document.getElementById("error-message");
        const errParent = error.parentElement;
        const initBody = document.getElementById("initBody");
        const entryBody = document.getElementById("entryBody");
        const resultsBody = document.getElementById("resultsBody");
        const ques = document.getElementById("ques");
        const ans = document.getElementById("ans");
        const incorrectDisplay = document.getElementById("incorrectDisplay");
        const correctAns = document.getElementById("correctAns");
        const review = document.getElementById("review");
        const prereview = document.getElementById("prereview");
        const skip = document.getElementById("skip");
        const submit = document.getElementById("submit");
        const results = document.getElementById("results");
        const next = document.getElementById("next");
        const homescreen = document.getElementById("homescreen");
        const roundCount = document.getElementById("roundCount");
        const report = document.getElementById("report");
        const repeatDialogue = document.getElementById("repeatDialogue");
        const restudy = document.getElementById("restudy");
        const extraBreak = document.getElementById("extraBreak");
        let processorFunction = () => {};
        let finishFunction = () => {};
        let prereviewFunction = () => {};
        let submitFunction = () => {};
        let ansFunction = (key) => {};
        let reviewFunction = () => {};
        let skipFunction = () => {};
        let restudyFunction = () => {};
        next.addEventListener("click", () => processorFunction());
        prereview.addEventListener("click", () => prereviewFunction());
        submit.addEventListener("click", () => submitFunction());
        ans.addEventListener("keydown", (key) => ansFunction(key));
        review.addEventListener("click", () => reviewFunction());
        skip.addEventListener("click", () => skipFunction());
        restudy.addEventListener("click", () => restudyFunction());
        homescreen.addEventListener("click", () => {
            entryBody.style.display = "none";
            initBody.style.display = "block";
            roundCount.innerText = count;
            count = 1;
            report.style.display = "inline-block";
            repeatDialogue.style.display = "inline-block";
            extraBreak.style.display = "block";
        });
        const ask1 = document.getElementById("ask1");
        const ask2 = document.getElementById("ask2");
        const ask3 = document.getElementById("ask3");
        const ans1 = document.getElementById("ans1");
        const ans2 = document.getElementById("ans2");
        const ans3 = document.getElementById("ans3");
        let defaultAnsMode = true;
        document.getElementById("swap1").addEventListener("click", () => {
            if (defaultAnsMode) {
                ask1.innerText = "term";
                ans1.innerText = "definition";
                defaultAnsMode = false;
            }
            else {
                ask1.innerText = "definition";
                ans1.innerText = "term";
                defaultAnsMode = true;
            }
        });
        document.getElementById("swap2").addEventListener("click", () => {
            if (defaultAnsMode) {
                ask2.innerText = "term";
                ans2.innerText = "definition";
                defaultAnsMode = false;
            }
            else {
                ask2.innerText = "definition";
                ans2.innerText = "term";
                defaultAnsMode = true;
            }
        });
        document.getElementById("swap3").addEventListener("click", () => {
            if (defaultAnsMode) {
                ask3.innerText = "term";
                ans3.innerText = "definition";
                defaultAnsMode = false;
            }
            else {
                ask3.innerText = "definition";
                ans3.innerText = "term";
                defaultAnsMode = true;
            }
        });
        let resPtrRef;
        let iPtr;
        let dPtr;
        let endPtr;
        let currentPair;
        let interrupt = false;
        let padd = false;
        let count = 1;
        let pElems = -1;
        let studyDat;
        let bSdl;
        let randPtr;
        homescreen.addEventListener("click", () => {
            entryBody.style.display = "none";
            initBody.style.display = "block";
            if (defaultAnsMode) {
                ask1.innerText = "definition";
                ans1.innerText = "term";
            } else {
                ask1.innerText = "term";
                ans1.innerText = "definition";
            }
            count = 1;
        });
        import Module from "./prog.js";
        Module().then((mod) => {
            document.getElementById("start").addEventListener("click", () => {
                const gSeparator = (entry.value.length > 0 ? entry.value : "\n");
                const lSeparator = (termDef.value.length > 0 ? termDef.value : "\t");
                studyDat = input.value.split(gSeparator).map(e => e.split(lSeparator));
                let sdl = studyDat.length;
                if (sdl < 3) {
                    errParent.style.visibility = "visible";
                    error.innerText = "Please enter at least 3 terms.";
                    repeatDialogue.style.display = "none";
                    extraBreak.style.display = "none";
                    return;
                }
                else if (sdl > 2500) {
                    errParent.style.visibility = "visible";
                    error.innerText = "You have entered "+sdl.toString()+" terms, exceeding the limit of 2500. Please enter no more than 2500 terms.";
                    repeatDialogue.style.display = "none";
                    extraBreak.style.display = "none";
                    return;
                }
                else {
                    for (let ct = 0; ct < sdl; ct++) {
                        let curr = studyDat[ct];
                        let cl = curr.length;
                        if (cl == 2) {
                            if (curr[0].length == 0) {
                                errParent.style.visibility = "visible";
                                error.innerText = "Entry "+(ct+1).toString()+" (\" . . . "+curr[1]+" . . . \") is missing a term. Please ensure all entries have a term.";
                                repeatDialogue.style.display = "none";
                                extraBreak.style.display = "none";
                                return;
                            } else if (curr[1].length == 0) {
                                errParent.style.visibility = "visible";
                                error.innerText = "Entry "+(ct+1).toString()+" (\""+curr[0]+" . . . \") is missing a definition. Please ensure all entries have a definition.";
                                repeatDialogue.style.display = "none";
                                extraBreak.style.display = "none";
                                return;
                            }
                        } else if (cl == 1) {
                            if (curr[0].length == 0) {
                                errParent.style.visibility = "visible";
                                error.innerText = "Entry "+(ct+1).toString()+" is empty. Please ensure all entries have a term and definition.";
                                repeatDialogue.style.display = "none";
                                extraBreak.style.display = "none";
                                return;
                            } else {
                                errParent.style.visibility = "visible";
                                error.innerText = "Entry "+(ct+1).toString()+" (\""+curr[0]+" . . . \") is missing a term or definition. Please ensure all entries have a term and definition.";
                                repeatDialogue.style.display = "none";
                                extraBreak.style.display = "none";
                                return;
                            }
                        } else {
                            if (curr[0].length == 0) {
                                errParent.style.visibility = "visible";
                                for (let i = 1; i < cl; i++) {
                                    if (curr[i].length != 0) {
                                        error.innerText = "Entry "+(ct+1).toString()+" (\" . . . "+curr[i]+" . . . \") is improperly formatted. Please ensure all entries have exactly one term and one definition.";
                                        repeatDialogue.style.display = "none";
                                        extraBreak.style.display = "none";
                                        return;
                                    }
                                }
                                error.innerText = "Entry "+(ct+1).toString()+" only contains separator characters. Please ensure all entries have exactly one term and one definition.";
                                repeatDialogue.style.display = "none";
                                extraBreak.style.display = "none";
                                return;
                            } else {
                                errParent.style.visibility = "visible";
                                error.innerText = "Entry "+(ct+1).toString()+" (\""+curr[0]+" . . . \") is improperly formatted. Please ensure all entries have exactly one term and one definition.";
                                repeatDialogue.style.display = "none";
                                extraBreak.style.display = "none";
                                return;
                            }
                        }
                    }
                    errParent.style.visibility = "hidden";
                    initBody.style.display = "none";
                    entryBody.style.display = "block";
                    if (defaultAnsMode) {
                        ask2.innerText = "definition";
                        ans2.innerText = "term";
                    } else {
                        ask2.innerText = "term";
                        ans2.innerText = "definition";
                    }
                    bSdl = sdl;
                    if (sdl < 256) {
                        if (pElems != -1)
                            mod._free(randPtr);
                        randPtr = mod._malloc(sdl);
                        mod._b_shuffle(randPtr, sdl);
                        // initial function
                        iPtr = randPtr;
                        dPtr = randPtr;
                        endPtr = randPtr + sdl - 1;
                        if (defaultAnsMode)
                            currentPair = studyDat[mod.HEAPU8[iPtr]];
                        else {
                            let tempIndex = mod.HEAPU8[iPtr];
                            currentPair = [studyDat[tempIndex][1], studyDat[tempIndex][0]];
                        }
                        ques.innerText = currentPair[1];
                        // end initial function
                        if (pElems >= 256 || pElems == -1) {
                            processorFunction = () => {
                                iPtr = randPtr;
                                dPtr = randPtr;
                                endPtr = randPtr + sdl - 1;
                                if (defaultAnsMode)
                                    currentPair = studyDat[mod.HEAPU8[iPtr]];
                                else {
                                    let tempIndex = mod.HEAPU8[iPtr];
                                    currentPair = [studyDat[tempIndex][1], studyDat[tempIndex][0]];
                                }
                                ques.innerText = currentPair[1];
                                resultsBody.style.display = "none";
                                entryBody.style.display = "block";
                                if (defaultAnsMode) {
                                    ask2.innerText = "definition";
                                    ans2.innerText = "term";
                                } else {
                                    ask2.innerText = "term";
                                    ans2.innerText = "definition";
                                }
                            };
                            finishFunction = () => {
                                let resPtr = randPtr;
                                sdl = dPtr - resPtr;
                                if (sdl != 0) {
                                    entryBody.style.display = "none";
                                    resultsBody.style.display = "block";
                                    if (defaultAnsMode) {
                                        ask3.innerText = "definition";
                                        ans3.innerText = "term";
                                    } else {
                                        ask3.innerText = "term";
                                        ans3.innerText = "definition";
                                    }
                                    currentPair = studyDat[mod.HEAPU8[resPtr]];
                                    let accumulator = currentPair[0]+lSeparator+currentPair[1];
                                    while (resPtr < dPtr-1) {
                                        resPtr++;
                                        currentPair = studyDat[mod.HEAPU8[resPtr]];
                                        accumulator += gSeparator+currentPair[0]+lSeparator+currentPair[1];
                                    }
                                    results.value = accumulator;
                                    count++;
                                } else {
                                    entryBody.style.display = "none";
                                    initBody.style.display = "block";
                                    if (defaultAnsMode) {
                                        ask1.innerText = "definition";
                                        ans1.innerText = "term";
                                    } else {
                                        ask1.innerText = "term";
                                        ans1.innerText = "definition";
                                    }
                                    roundCount.innerText = count;
                                    count = 1;
                                    report.style.display = "inline-block";
                                    repeatDialogue.style.display = "inline-block";
                                    extraBreak.style.display = "block";
                                }
                            };
                            prereviewFunction = () => {
                                if (!padd) {
                                    mod.HEAPU8[dPtr] = mod.HEAPU8[iPtr];
                                    dPtr++;
                                    padd = true;
                                }
                            };
                            submitFunction = () => {
                                if (!interrupt) {
                                    if (ans.value == currentPair[0]) {
                                        if (iPtr == endPtr) {
                                            finishFunction();
                                            return;
                                        }
                                        iPtr++;
                                        if (defaultAnsMode)
                                            currentPair = studyDat[mod.HEAPU8[iPtr]];
                                        else {
                                            let tempIndex = mod.HEAPU8[iPtr];
                                            currentPair = [studyDat[tempIndex][1], studyDat[tempIndex][0]];
                                        }
                                        ques.innerText = currentPair[1];
                                        ans.value = "";
                                    } else {
                                        interrupt = true;
                                        ans.readOnly = true;
                                        incorrectDisplay.style.display = "inline-block";
                                        correctAns.innerText = currentPair[0];
                                    }
                                }
                            };
                            ansFunction = (key) => {
                                if (!interrupt && key.key == "Enter") {
                                    key.preventDefault();
                                    if (ans.value == currentPair[0]) {
                                        if (iPtr == endPtr) {
                                            finishFunction();
                                            return;
                                        }
                                        iPtr++;
                                        if (defaultAnsMode)
                                            currentPair = studyDat[mod.HEAPU8[iPtr]];
                                        else {
                                            let tempIndex = mod.HEAPU8[iPtr];
                                            currentPair = [studyDat[tempIndex][1], studyDat[tempIndex][0]];
                                        }
                                        ques.innerText = currentPair[1];
                                        ans.value = "";
                                    } else {
                                        interrupt = true;
                                        ans.readOnly = true;
                                        incorrectDisplay.style.display = "inline-block";
                                        correctAns.innerText = currentPair[0];
                                    }
                                }
                            };
                            reviewFunction = () => {
                                if (!padd) {
                                    mod.HEAPU8[dPtr] = mod.HEAPU8[iPtr];
                                    dPtr++;
                                }
                                ans.value = "";
                                ans.readOnly = false;
                                padd = false;
                                interrupt = false;
                                if (iPtr == endPtr) {
                                    finishFunction();
                                    return;
                                }
                                incorrectDisplay.style.display = "none";
                                iPtr++;
                                if (defaultAnsMode)
                                    currentPair = studyDat[mod.HEAPU8[iPtr]];
                                else {
                                    let tempIndex = mod.HEAPU8[iPtr];
                                    currentPair = [studyDat[tempIndex][1], studyDat[tempIndex][0]];
                                }
                                ques.innerText = currentPair[1];
                            };
                            skipFunction = () => {
                                ans.value = "";
                                ans.readOnly = false;
                                padd = false;
                                interrupt = false;
                                if (iPtr == endPtr) {
                                    finishFunction();
                                    return;
                                }
                                incorrectDisplay.style.display = "none";
                                iPtr++;
                                if (defaultAnsMode)
                                    currentPair = studyDat[mod.HEAPU8[iPtr]];
                                else {
                                    let tempIndex = mod.HEAPU8[iPtr];
                                    currentPair = [studyDat[tempIndex][1], studyDat[tempIndex][0]];
                                }
                                ques.innerText = currentPair[1];
                            };
                            restudyFunction = () => {
                                errParent.style.visibility = "hidden";
                                initBody.style.display = "none";
                                entryBody.style.display = "block";
                                if (defaultAnsMode) {
                                    ask2.innerText = "definition";
                                    ans2.innerText = "term";
                                } else {
                                    ask2.innerText = "term";
                                    ans2.innerText = "definition";
                                }
                                sdl = bSdl;
                                mod._b_shuffle(randPtr, sdl);
                                iPtr = randPtr;
                                dPtr = randPtr;
                                endPtr = randPtr + sdl - 1;
                                if (defaultAnsMode)
                                    currentPair = studyDat[mod.HEAPU8[iPtr]];
                                else {
                                    let tempIndex = mod.HEAPU8[iPtr];
                                    currentPair = [studyDat[tempIndex][1], studyDat[tempIndex][0]];
                                }
                                ques.innerText = currentPair[1];
                            };
                        }
                        pElems = sdl;
                    } else {
                        if (pElems != -1)
                            mod._free(randPtr);
                        randPtr = mod._malloc(sdl<<1);
                        mod._w_shuffle(randPtr, sdl);
                        // initial function
                        iPtr = (randPtr >> 1);
                        resPtrRef = iPtr;
                        dPtr = iPtr;
                        endPtr = iPtr + sdl - 1;
                        if (defaultAnsMode)
                            currentPair = studyDat[mod.HEAPU16[iPtr]];
                        else {
                            let tempIndex = mod.HEAPU16[iPtr];
                            currentPair = [studyDat[tempIndex][1], studyDat[tempIndex][0]];
                        }
                        ques.innerText = currentPair[1];
                        // end initial function
                        if (pElems < 256) {
                            processorFunction = () => {
                                iPtr = resPtrRef;
                                dPtr = iPtr;
                                endPtr = iPtr + sdl - 1;
                                if (defaultAnsMode)
                                    currentPair = studyDat[mod.HEAPU16[iPtr]];
                                else {
                                    let tempIndex = mod.HEAPU16[iPtr];
                                    currentPair = [studyDat[tempIndex][1], studyDat[tempIndex][0]];
                                }
                                ques.innerText = currentPair[1];
                                resultsBody.style.display = "none";
                                entryBody.style.display = "block";
                                if (defaultAnsMode) {
                                    ask2.innerText = "definition";
                                    ans2.innerText = "term";
                                } else {
                                    ask2.innerText = "term";
                                    ans2.innerText = "definition";
                                }
                            };
                            finishFunction = () => {
                                let resPtr = resPtrRef;
                                sdl = dPtr - resPtr;
                                if (sdl != 0) {
                                    entryBody.style.display = "none";
                                    resultsBody.style.display = "block";
                                    if (defaultAnsMode) {
                                        ask3.innerText = "definition";
                                        ans3.innerText = "term";
                                    } else {
                                        ask3.innerText = "term";
                                        ans3.innerText = "definition";
                                    }
                                    currentPair = studyDat[mod.HEAPU16[resPtr]];
                                    let accumulator = currentPair[0]+lSeparator+currentPair[1];
                                    while (resPtr < dPtr-1) {
                                        resPtr++;
                                        currentPair = studyDat[mod.HEAPU16[resPtr]];
                                        accumulator += gSeparator+currentPair[0]+lSeparator+currentPair[1];
                                    }
                                    results.value = accumulator;
                                    count++;
                                } else {
                                    entryBody.style.display = "none";
                                    initBody.style.display = "block";
                                    if (defaultAnsMode) {
                                        ask1.innerText = "definition";
                                        ans1.innerText = "term";
                                    } else {
                                        ask1.innerText = "term";
                                        ans1.innerText = "definition";
                                    }
                                    roundCount.innerText = count;
                                    count = 1;
                                    report.style.display = "inline-block";
                                    repeatDialogue.style.display = "inline-block";
                                    extraBreak.style.display = "block";
                                }
                            };
                            prereviewFunction = () => {
                                if (!padd) {
                                    mod.HEAPU16[dPtr] = mod.HEAPU16[iPtr];
                                    dPtr++;
                                    padd = true;
                                }
                            };
                            submitFunction = () => {
                                if (!interrupt) {
                                    if (ans.value == currentPair[0]) {
                                        if (iPtr == endPtr) {
                                            finishFunction();
                                            return;
                                        }
                                        iPtr++;
                                        if (defaultAnsMode)
                                            currentPair = studyDat[mod.HEAPU16[iPtr]];
                                        else {
                                            let tempIndex = mod.HEAPU16[iPtr];
                                            currentPair = [studyDat[tempIndex][1], studyDat[tempIndex][0]];
                                        }
                                        ques.innerText = currentPair[1];
                                        ans.value = "";
                                    } else {
                                        interrupt = true;
                                        ans.readOnly = true;
                                        incorrectDisplay.style.display = "inline-block";
                                        correctAns.innerText = currentPair[0];
                                    }
                                }
                            };
                            ansFunction = (key) => {
                                if (!interrupt && key.key == "Enter") {
                                    key.preventDefault();
                                    if (ans.value == currentPair[0]) {
                                        if (iPtr == endPtr) {
                                            finishFunction();
                                            return;
                                        }
                                        iPtr++;
                                        if (defaultAnsMode)
                                            currentPair = studyDat[mod.HEAPU16[iPtr]];
                                        else {
                                            let tempIndex = mod.HEAPU16[iPtr];
                                            currentPair = [studyDat[tempIndex][1], studyDat[tempIndex][0]];
                                        }
                                        ques.innerText = currentPair[1];
                                        ans.value = "";
                                    } else {
                                        interrupt = true;
                                        ans.readOnly = true;
                                        incorrectDisplay.style.display = "inline-block";
                                        correctAns.innerText = currentPair[0];
                                    }
                                }
                            };
                            reviewFunction = () => {
                                if (!padd) {
                                    mod.HEAPU16[dPtr] = mod.HEAPU16[iPtr];
                                    dPtr++;
                                }
                                ans.value = "";
                                ans.readOnly = false;
                                padd = false;
                                interrupt = false;
                                if (iPtr == endPtr) {
                                    finishFunction();
                                    return;
                                }
                                incorrectDisplay.style.display = "none";
                                iPtr++;
                                if (defaultAnsMode)
                                    currentPair = studyDat[mod.HEAPU16[iPtr]];
                                else {
                                    let tempIndex = mod.HEAPU16[iPtr];
                                    currentPair = [studyDat[tempIndex][1], studyDat[tempIndex][0]];
                                }
                                ques.innerText = currentPair[1];
                            };
                            skipFunction = () => {
                                ans.value = "";
                                ans.readOnly = false;
                                padd = false;
                                interrupt = false;
                                if (iPtr == endPtr) {
                                    finishFunction();
                                    return;
                                }
                                incorrectDisplay.style.display = "none";
                                iPtr++;
                                if (defaultAnsMode)
                                    currentPair = studyDat[mod.HEAPU16[iPtr]];
                                else {
                                    let tempIndex = mod.HEAPU16[iPtr];
                                    currentPair = [studyDat[tempIndex][1], studyDat[tempIndex][0]];
                                }
                                ques.innerText = currentPair[1];
                            };
                            restudyFunction = () => {
                                errParent.style.visibility = "hidden";
                                initBody.style.display = "none";
                                entryBody.style.display = "block";
                                if (defaultAnsMode) {
                                    ask2.innerText = "definition";
                                    ans2.innerText = "term";
                                } else {
                                    ask2.innerText = "term";
                                    ans2.innerText = "definition";
                                }
                                sdl = bSdl;
                                mod._w_shuffle(randPtr, sdl);
                                iPtr = resPtrRef;
                                dPtr = iPtr;
                                endPtr = iPtr + sdl - 1;
                                if (defaultAnsMode)
                                    currentPair = studyDat[mod.HEAPU16[iPtr]];
                                else {
                                    let tempIndex = mod.HEAPU16[iPtr];
                                    currentPair = [studyDat[tempIndex][1], studyDat[tempIndex][0]];
                                }
                                ques.innerText = currentPair[1];
                            };
                        }
                        pElems = sdl;
                    }
                }
            });
        });
    </script>
</html>